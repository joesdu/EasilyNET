# ADR-0004: WAL fsync 策略与性能权衡

## 状态

Accepted

## 背景

WAL 刷盘策略直接影响写入延迟、吞吐和崩溃一致性边界。

## 决策

支持三种策略：

- `Always`：每次写后刷盘，优先一致性。
- `Batch`：批量刷盘，优先吞吐。
- `Adaptive`：低负载趋向 `Always`，高负载转 `Batch`。

## 影响

- 优点：按场景可配置，兼顾安全与性能。
- 代价：`Adaptive` 需要结合业务负载阈值持续校准。
